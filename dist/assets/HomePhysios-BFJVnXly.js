import{x as q,j as e,e as I,d as a,F as E,y as H}from"./index-B5YKgjKu.js";import{a as V}from"./index-DQkzyL4I.js";import{S as W,a as G}from"./swiper-BuGcy2ls.js";import{P as J}from"./pagination-CqotOzFB.js";import{A as K}from"./autoplay-BRjq11nS.js";/* empty css                   */import{S as Q,U as X}from"./users-DJ7nqm6u.js";import{m as Y}from"./homecare-CKcwPhMF.js";import"./create-element-if-not-defined-oi10YSbo.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ee=q("map-pin",Z),te=[{id:1,image:"/homecare/banner2.jpeg"},{id:2,image:"/homecare/banner3.jpeg"}];function se(){return e.jsx(W,{modules:[J,K],pagination:{clickable:!0},autoplay:{delay:4e3},loop:!0,spaceBetween:16,slidesPerView:1,className:"w-full  rounded-xl overflow-hidden",children:te.map(({id:t,image:o})=>e.jsx(G,{children:e.jsx("img",{src:o,alt:`Promo ${t}`,className:"w-full h-40  md:h-64 object-contain md:object-contain rounded-xl"})},t))})}function ae({physio:t}){var x,i;const o=I();return e.jsx("div",{className:" p-2 rounded-xl shadow flex mb-4 border-green border  bg-[#d9fddd]",children:e.jsxs("div",{className:"flex-1  justify-between",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("img",{src:t==null?void 0:t.profileImage,alt:t==null?void 0:t.fullName,className:"w-24 h-24 object-cover rounded-lg border mr-4"}),e.jsxs("div",{className:"flex  text-sm text-semibold gap-2 my-1 flex-col",children:[e.jsx("div",{className:"font-semibold text-md text-green",children:t==null?void 0:t.fullName}),e.jsxs("div",{className:"flex gap-2 items-center font-semibold",children:[e.jsx(Q,{className:"w-4 h-4"})," ",t==null?void 0:t.workExperience," + years Experience"]}),e.jsxs("div",{className:"flex gap-2 items-center font-semibold",children:[e.jsx(X,{className:"w-4 h-4"})," ",t==null?void 0:t.patientCount," Patient Treated"]}),e.jsxs("div",{className:"flex gap-2 items-center font-semibold",children:[e.jsx(ee,{className:"w-4 h-4"})," ",t==null?void 0:t.travelDistance," Nearby"]})]})]}),e.jsx("div",{className:"flex  gap-2 mt-1 justify-start flex-wrap",children:(x=t==null?void 0:t.specialization)==null?void 0:x.map(m=>e.jsx("span",{className:"bg-white text-green font-semibold  px-3 py-1 rounded text-sm border border-green",children:m==null?void 0:m.name},m))}),e.jsxs("div",{className:"flex flex-row items-center mt-2",children:[e.jsxs("div",{className:"font-medium text-green mr-4",children:[e.jsx("p",{className:"text-sm font-semibold text-black",children:"Consultation Fee"}),"â‚¹ ",(i=t==null?void 0:t.home)==null?void 0:i.charges]}),e.jsx("button",{className:"w-fit ml-auto px-4 py-2 bg-[#189e3e] text-white rounded-xl text-sm hover:bg-green font-semibold",onClick:()=>o(`/homecare/profile/${t==null?void 0:t._id}`),children:"Book your Session"})]})]})})}function ge(){const t=I();localStorage.getItem("homecareUserType"),a.useEffect(()=>{localStorage.getItem("homecareUserType")==="physio"&&t("/homecare/physio-current",{replace:!0})},[t]);const[o,x]=a.useState(""),[i,m]=a.useState(""),[r,u]=a.useState("default"),[n,f]=a.useState(""),[c,h]=a.useState(""),[b,N]=a.useState([]),[A,w]=a.useState(!1),[p,R]=a.useState({lat:null,lng:null}),[g,v]=a.useState(!0),[S,P]=a.useState(!1),[y,U]=a.useState("");a.useEffect(()=>{navigator.geolocation.getCurrentPosition(async s=>{var C,L,F,T;const d=s.coords.latitude,k=s.coords.longitude;R({lat:d,lng:k}),P(!0);try{const l=await(await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${d}&lon=${k}&format=json`)).json(),M=((C=l==null?void 0:l.address)==null?void 0:C.city)||((L=l==null?void 0:l.address)==null?void 0:L.town)||((F=l==null?void 0:l.address)==null?void 0:F.village)||((T=l==null?void 0:l.address)==null?void 0:T.county)||"";U(M)}catch($){console.error("Failed to fetch city name:",$)}},s=>{console.error("Location error:",s),v(!1),P(!0)})},[]);const z=async()=>{w(!0);const s={...o&&{search:o},...r==="mpt"&&{filter:r},...r==="price"&&n&&{priceSort:n},...r==="rating"&&c&&{rating:c},...g&&p.lat&&{lat:p.lat,lng:p.lng}};try{const d=await Y(s);N(d)}catch(d){console.error("Error fetching physios:",d),N([])}finally{w(!1)}};a.useEffect(()=>{S&&z()},[S,o,r,n,c,g]),a.useEffect(()=>{i.trim()===""&&x("")},[i]);const D=()=>{const s=i.trim();x(s)},j=s=>{u(s),f(""),h("")},O=()=>{f(""),r==="price"&&u("default")},_=()=>{h(""),r==="rating"&&u("default")},B=()=>{v(s=>!s)};return e.jsxs("div",{className:"w-full max-w-4xl mx-auto px-4 mb-16 relative",children:[e.jsx("div",{className:"my-6 w-[320px] sm:w-full mx-auto",children:e.jsx(se,{})}),e.jsxs("div",{className:"flex flex-col gap-3 bg-[#d9fddd] text-green-900 p-4 rounded-md sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm sm:text-base",children:"Hello Patient ðŸ‘‹"}),e.jsx("p",{className:"text-md sm:text-lg font-semibold",children:"How is your health today?"})]}),e.jsxs("div",{className:"w-full sm:w-1/2 flex gap-2",children:[e.jsx("input",{type:"text",placeholder:'Search for "Dr. Name"',value:i,onChange:s=>m(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),e.jsxs("button",{onClick:D,className:"px-3 py-2 rounded-lg bg-green text-white flex items-center gap-1",children:[e.jsx(V,{}),"Search"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between m-4",children:[e.jsx("p",{className:"font-semibold",children:g?`Nearby Physio's${y?` in ${y}`:""}`:"All Physio's in India"}),e.jsx("button",{className:`text-sm font-medium px-3 py-1 rounded-md ${g?"bg-[#e5f7ec] text-green border":"bg-green text-white"}`,onClick:B,children:g?"See All":"See Nearby"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 mb-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>j("price"),className:`px-3 py-1 rounded-md text-sm flex items-center gap-1 ${r==="price"&&n?"bg-green text-white":"bg-[#e5f7ec] text-green border"}`,children:[n?n==="lowToHigh"?"Low to High":"High to Low":"Sort by Price",n&&e.jsx(E,{className:"text-xs ml-1 cursor-pointer",onClick:s=>{s.stopPropagation(),O()}}),!n&&e.jsx(H,{className:"text-xs"})]}),r==="price"&&!n&&e.jsxs("div",{className:"absolute z-10 bg-white border mt-1 rounded shadow-md text-sm w-40",children:[e.jsx("button",{onClick:()=>f("lowToHigh"),className:"block px-4 py-2 hover:bg-gray-100 w-full text-left",children:"Low to High"}),e.jsx("button",{onClick:()=>f("highToLow"),className:"block px-4 py-2 hover:bg-gray-100 w-full text-left",children:"High to Low"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>j("rating"),className:`px-3 py-1 rounded-md text-sm flex items-center gap-1 ${r==="rating"&&c?"bg-green text-white":"bg-[#e5f7ec] text-green border"}`,children:[c?`${c} Star Physio`:"Rating",c&&e.jsx(E,{className:"text-xs ml-1 cursor-pointer",onClick:s=>{s.stopPropagation(),_()}}),!c&&e.jsx(H,{className:"text-xs"})]}),r==="rating"&&!c&&e.jsx("div",{className:"absolute z-10 bg-white border mt-1 rounded shadow-md text-sm w-44",children:[5,4,3,2,1].map(s=>e.jsxs("button",{onClick:()=>h(String(s)),className:"block px-4 py-2 hover:bg-gray-100 w-full text-left",children:[s," Star Physio"]},s))})]}),e.jsx("button",{onClick:()=>r==="mpt"?u("default"):j("mpt"),className:`px-3 py-1 rounded-md text-sm ${r==="mpt"?"bg-green text-white":"bg-[#e5f7ec] text-green border"}`,children:"MPT Physio"})]}),e.jsx("div",{className:"space-y-4",children:A?e.jsx("p",{className:"text-gray-500 text-sm",children:"Loading physiotherapists..."}):(b==null?void 0:b.length)>0?b.map(s=>e.jsx(ae,{physio:s},s==null?void 0:s._id)):e.jsx("p",{className:"text-gray-600 text-sm",children:"No physiotherapists found."})})]})}export{ge as default};
