import{d as a,e as j,j as t,G as w}from"./index-B-e9AaA1.js";function C(){var g;const[r,d]=a.useState("OnGoing"),[c,m]=a.useState([]),[i,f]=a.useState([]),[y,x]=a.useState(!0),o=j(),l=((g=JSON.parse(localStorage.getItem("homecareUser")))==null?void 0:g.userId)??null;a.useEffect(()=>{if(!l)return;(async()=>{try{x(!0);const s=await w(l),h=[],u=[];s.forEach(n=>{const b={id:n._id,patientName:(n==null?void 0:n.patientName)||"Patient",type:"Consultation",date:new Date(n.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),isTreatmentRequested:n==null?void 0:n.isTreatmentRequested,appointmentStatus:n==null?void 0:n.appointmentStatus,status:n==null?void 0:n.appointmentCompleted};n.appointmentCompleted===!0?u.push(b):h.push(b)}),m(h),f(u)}catch(s){console.error("Fetch error:",s)}finally{x(!1)}})()},[l]);const N=e=>{o("/homecare/get-invoice",{state:{order:e,type:"appointment"}})},p=(e,s)=>t.jsxs("div",{className:"bg-white rounded-2xl shadow border border-gray-100  flex  flex-col px-4 py-5",children:[t.jsxs("div",{className:"border-b flex flex-row justify-between  pb-2",children:[t.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Home Care"}),t.jsx("div",{className:"",children:s?t.jsx("span",{className:"px-2.5 py-[2px] mb-1 inline-block rounded-full text-[11px] font-medium text-green bg-green/10 border border-green whitespace-nowrap",children:e.status&&"Completed"}):t.jsx("span",{className:"px-2.5 py-[2px] mb-1 inline-block rounded-full text-[11px] font-medium text-yellow-700 bg-yellow-50 border border-yellow-400 whitespace-nowrap",children:!e.status&&"OnGoing"})})]}),t.jsxs("div",{className:"flex items-center  pt-4",children:[t.jsx("img",{src:"https://randomuser.me/api/portraits/men/1.jpg",alt:e.patientName,className:"w-12 h-12 rounded-full object-cover border border-gray-200"}),t.jsxs("div",{className:"ml-4 flex-1",children:[t.jsx("div",{className:"font-medium text-base",children:e.patientName}),t.jsx("div",{className:"text-xs text-gray-600 mt-1",children:e.type})," ",t.jsx("div",{className:"text-xs text-gray-600 mt-1",children:e.date})]})]}),s?t.jsxs("div",{className:"flex flex-col gap-2 mt-5",children:[t.jsx("button",{disabled:!(e!=null&&e.status),onClick:()=>N(e),className:"flex-1 border border-green text-green py-2 rounded-xl text-sm font-semibold shadow-sm",children:"Invoice"}),(e==null?void 0:e.isTreatmentRequested)&&(e==null?void 0:e.appointmentStatus)===0&&t.jsx("button",{onClick:()=>o(`/homecare/create-treatment/${e.id}`),className:"flex-1 bg-green text-white py-2 rounded-xl text-sm font-semibold shadow hover:bg-green/90 transition",children:"Create Treatment Plan"}),(e==null?void 0:e.appointmentStatus)===1&&t.jsx("button",{onClick:()=>o(`/homecare/physio-treatment/${e.id}`),className:"flex-1 bg-green text-white py-2 rounded-xl text-sm font-semibold shadow hover:bg-green/90 transition",children:"Go To Treatment"})]}):t.jsx("button",{onClick:()=>o(`/homecare/physio-consultation/${e.id}`),className:"mt-5 bg-green text-white w-full py-2.5 rounded-xl text-sm font-semibold shadow hover:bg-green/90 transition",children:"Start"})]},e.id);return t.jsxs("div",{className:"max-w-md mx-auto min-h-screen flex flex-col bg-white relative pb-28",children:[t.jsx("div",{className:"flex items-center justify-center h-14 text-base font-semibold border-b border-gray-100 bg-white",children:"Consultation"}),t.jsxs("div",{className:"flex w-full mt-1 bg-white",children:[t.jsx("button",{className:`flex-1 text-center py-3 font-semibold border-b-2 transition ${r==="OnGoing"?"text-green border-green bg-white":"text-gray-400 border-transparent"}`,onClick:()=>d("OnGoing"),children:"Ongoing"}),t.jsx("button",{className:`flex-1 text-center py-3 font-semibold border-b-2 transition ${r==="Completed"?"text-green border-green bg-white":"text-gray-400 border-transparent"}`,onClick:()=>d("Completed"),children:"Completed"})]}),t.jsx("div",{className:"px-3 py-4 space-y-5",children:y?t.jsx("p",{className:"text-center text-gray-500 mt-10",children:"Loading..."}):r==="OnGoing"?c.length>0?c.map(e=>p(e,!1)):t.jsx("p",{className:"text-center text-gray-400",children:"No ongoing consultations."}):i.length>0?i.map(e=>p(e,!0)):t.jsx("p",{className:"text-center text-gray-400",children:"No completed consultations."})})]})}export{C as default};
