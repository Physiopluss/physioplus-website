import{c as R,e as H,d as h,u as _,a9 as V,_ as v,aQ as U,j as s,aR as G,r}from"./index-B5YKgjKu.js";import{G as $}from"./index-BCaAT4L7.js";import{u as O,c as z,f as L,a as g,b as p}from"./formik.esm-VRL_jFfB.js";import{f as Q,g as W,l as D}from"./physioConnect-uRCnyBzu.js";import{S as J}from"./StepIndicator-DUZIKhhO.js";const ee=()=>{var S;const x=R(e=>{var c;return(c=e==null?void 0:e.physioConnectAuth)==null?void 0:c.physioId}),j=H(),[n,B]=h.useState(),E=_();h.useEffect(()=>{V.send({hitType:"pageview",page:window.location.pathname,title:"Physio Connect Work Experience"})},[]),h.useEffect(()=>{(async()=>{try{const c=await W(x);c.success?B(c.physioData):console.error("Error in response:",c.message)}catch(c){console.error("Error fetching physio data:",c)}})()},[]),h.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);const i=O({initialValues:{clinicName:"",clinicAddress:"",clinicPincode:"",clinicCity:"",clinicState:"",clinicCharges:"",clinicDuration:"",homePincode:"",homeCity:"",homeState:"",homeCharges:"",homeDuration:"",serviceType:""},validationSchema:z().shape({serviceType:L().min(1,"Select at least one service type"),clinicName:g().when("serviceType",{is:e=>e&&e.includes("clinic"),then:e=>e.required("Clinic Name is required"),otherwise:e=>e.notRequired()}),clinicAddress:g().when("serviceType",{is:e=>e&&e.includes("clinic"),then:e=>e.required("Clinic Address is required"),otherwise:e=>e.notRequired()}),clinicPincode:p().typeError("Clinic Pincode must be a number").when("serviceType",{is:e=>e&&e.includes("clinic"),then:e=>e.required("Clinic Pincode is required"),otherwise:e=>e.notRequired()}),clinicCity:g().when("serviceType",{is:e=>e&&e.includes("clinic"),then:e=>e.required("Clinic City is required"),otherwise:e=>e.notRequired()}),clinicState:g().when("serviceType",{is:e=>e&&e.includes("clinic"),then:e=>e.required("Clinic State is required"),otherwise:e=>e.notRequired()}),clinicCharges:p().typeError("Clinic Charges must be a number").when("serviceType",{is:e=>e&&e.includes("clinic"),then:e=>e.required("Clinic Charges is required"),otherwise:e=>e.notRequired()}),clinicDuration:p().typeError("Clinic Duration must be a number").when("serviceType",{is:e=>e&&e.includes("clinic"),then:e=>e.required("Clinic Duration is required"),otherwise:e=>e.notRequired()}),homeCharges:p().typeError("Home Charges must be a number").when("serviceType",{is:e=>e&&e.includes("home"),then:e=>e.required("Home Charges is required"),otherwise:e=>e.notRequired()}),homePincode:p().typeError("Home Pincode must be a number").when("serviceType",{is:e=>e&&e.includes("home"),then:e=>e.required("Home Pincode is required"),otherwise:e=>e.notRequired()}),homeCity:g().when("serviceType",{is:e=>e&&e.includes("home"),then:e=>e.required("Home City is required"),otherwise:e=>e.notRequired()}),homeState:g().when("serviceType",{is:e=>e&&e.includes("home"),then:e=>e.required("Home State is required"),otherwise:e=>e.notRequired()}),homeDuration:p().typeError("Home Duration must be a number").when("serviceType",{is:e=>e&&e.includes("home"),then:e=>e.required("Home Duration is required"),otherwise:e=>e.notRequired()})}),onSubmit:e=>{const{clinicName:c,clinicAddress:t,clinicPincode:l,clinicCity:o,clinicState:m,clinicCharges:u,clinicDuration:a,homePincode:y,homeCity:b,homeState:C,homeDuration:f,homeCharges:N}=e;Q(c,t,l,o,m,u,a,y,b,C,f,N,x).then(d=>{d.status>=200&&d.status<300?(v.success(d.data.message),setTimeout(()=>{j("/physio-connect/payment")},1e3)):d.status>=400&&d.status<500?v.error(d.data.message):v.error("Something went wrong")})}}),[P,F]=h.useState(!1),[w,I]=h.useState(!1),T=e=>{F(!0),i.handleChange(e)},k=e=>{I(!0),i.handleChange(e)};if(h.useEffect(()=>{var e,c,t,l,o,m,u,a,y,b,C,f,N,d,A,q;n&&i.setValues({serviceType:(n==null?void 0:n.serviceType)??[],clinicName:((e=n.clinic)==null?void 0:e.name)??"",clinicAddress:((c=n.clinic)==null?void 0:c.address)??"",clinicPincode:((l=(t=n.clinic)==null?void 0:t.zipCode)==null?void 0:l.toString())??"",clinicCity:(n==null?void 0:n.city)??"",clinicState:(n==null?void 0:n.state)??"",clinicCharges:((m=(o=n.clinic)==null?void 0:o.charges)==null?void 0:m.toString())??"",clinicDuration:((a=(u=n.clinic)==null?void 0:u.duration)==null?void 0:a.toString())??"",homePincode:((b=(y=n.home)==null?void 0:y.zipCode)==null?void 0:b.toString())??"",homeCity:((C=n.home)==null?void 0:C.homeCity)??"",homeState:((f=n.home)==null?void 0:f.homeState)??"",homeCharges:((d=(N=n.home)==null?void 0:N.charges)==null?void 0:d.toString())??"",homeDuration:((q=(A=n.home)==null?void 0:A.duration)==null?void 0:q.toString())??""})},[n]),h.useEffect(()=>{(async()=>{var c,t;if(P&&i.values.clinicPincode.length===6)try{const o=(await D(i.values.clinicPincode)).results[0].address_components,m=((c=o.find(a=>a.types.includes("locality")))==null?void 0:c.long_name)||"",u=((t=o.find(a=>a.types.includes("administrative_area_level_1")))==null?void 0:t.long_name)||"";i.setFieldValue("clinicCity",m),i.setFieldValue("clinicState",u)}catch(l){console.error("Clinic pincode fetch failed",l)}})()},[i.values.clinicPincode,P]),h.useEffect(()=>{(async()=>{var c,t;if(w&&i.values.homePincode.length===6)try{const o=(await D(i.values.homePincode)).results[0].address_components,m=((c=o.find(a=>a.types.includes("locality")))==null?void 0:c.long_name)||"",u=((t=o.find(a=>a.types.includes("administrative_area_level_1")))==null?void 0:t.long_name)||"";i.setFieldValue("homeCity",m),i.setFieldValue("homeState",u)}catch(l){console.error("Home pincode fetch failed",l)}})()},[i.values.homePincode,w]),x==null||x.length==0){const e=sessionStorage.getItem("physioConnectId");if(e!=null)E(U(e));else return s.jsx(G,{to:"/physio-connect/signup"})}return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 bg-[#FFFDF5] px-2 py-4 justify-center  md:px-8 lg:px-16",children:[s.jsx("div",{className:"flex-1 flex justify-center",children:s.jsx(J,{currentStep:3})}),s.jsx("div",{className:"w-full max-w-6xl mx-auto border border-gray-200 rounded-lg bg-white px-4 md:px-12 py-8",children:s.jsxs("form",{onSubmit:i.handleSubmit,className:"flex flex-col gap-2 flex-1 max-w-screen-lg",children:[s.jsx("h6",{className:"font-semibold text-3xl",children:"Business Details"}),s.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Fill in your business details below"}),((S=i.values.serviceType)==null?void 0:S.includes("clinic"))&&s.jsxs("div",{children:[s.jsxs("div",{className:"space-y-2 mb-3",children:[s.jsx("label",{htmlFor:"clinicName",className:"text-sm font-semibold",children:"Clinic Name"}),s.jsx(r.Input,{name:"clinicName",id:"clinicName",placeholder:"Enter Clinic name",value:i.values.clinicName,onChange:i.handleChange,labelProps:{className:"hidden"},className:"border-none placeholder:text-gray-500 placeholder:opacity-100 bg-white ring-1 ring-[#A9ABB2] focus:ring-2 focus:ring-black"})]}),i.touched.clinicName&&i.errors.clinicName&&s.jsx("p",{className:"text-red-500",children:i.errors.clinicName}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"clinicAddress",className:"text-sm font-semibold",children:"Clinic Address"}),s.jsx(r.Input,{name:"clinicAddress",id:"clinicAddress",placeholder:"Enter Clinic Address",value:i.values.clinicAddress,onChange:i.handleChange,labelProps:{className:"hidden"},className:"border-none placeholder:text-gray-500 placeholder:opacity-100 bg-white ring-1 ring-[#A9ABB2] focus:ring-2 focus:ring-black"}),i.touched.clinicAddress&&i.errors.clinicAddress&&s.jsx("p",{className:"text-red-500",children:i.errors.clinicAddress})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"clinicAddress",className:"text-sm font-semibold",children:"Clinic City"}),s.jsx(r.Input,{name:"clinicCity",value:i.values.clinicCity,onChange:i.handleChange,labelProps:{className:"hidden"},placeholder:"Enter City",disabled:i.values.clinicPincode.length==6,className:"border-none placeholder:text-gray-500 placeholder:opacity-100 bg-white ring-1 ring-[#A9ABB2] focus:ring-2 focus:ring-black"}),i.touched.clinicCity&&i.errors.clinicCity&&s.jsx("p",{className:"text-red-500",children:i.errors.clinicCity})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"clinicState",className:"text-sm font-semibold",children:"Clinic State"}),s.jsx(r.Input,{name:"clinicState",value:i.values.clinicState,onChange:i.handleChange,labelProps:{className:"hidden"},placeholder:"Enter State",disabled:i.values.clinicPincode.length==6,className:"border-none placeholder:text-gray-500 placeholder:opacity-100 bg-white ring-1 ring-[#A9ABB2] focus:ring-2 focus:ring-black"}),i.touched.clinicState&&i.errors.clinicState&&s.jsx("p",{className:"text-red-500",children:i.errors.clinicState})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"clinicPincode",className:"text-sm font-semibold",children:"Pincode"}),s.jsx(r.Input,{name:"clinicPincode",id:"clinicPincode",placeholder:"Enter Pincode",value:i.values.clinicPincode,onChange:T,labelProps:{className:"hidden"},className:"border-none placeholder:text-gray-500 placeholder:opacity-100 bg-white ring-1 ring-[#A9ABB2] focus:ring-2 focus:ring-black"}),i.touched.clinicPincode&&i.errors.clinicPincode&&s.jsx("p",{className:"text-red-500",children:i.errors.clinicPincode})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"clinicCharges",className:"text-sm font-semibold",children:"Clinic Consultation Fee"}),s.jsx(r.Input,{name:"clinicCharges",id:"clinicCharges",placeholder:"â‚¹ Enter clinic consultation fee in INR",value:i.values.clinicCharges,onChange:i.handleChange,labelProps:{className:"hidden"},className:"border-none placeholder:text-gray-500 placeholder:opacity-100 bg-white ring-1 ring-[#A9ABB2] focus:ring-2 focus:ring-black"}),i.touched.clinicCharges&&i.errors.clinicCharges&&s.jsx("p",{className:"text-red-500",children:i.errors.clinicCharges})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"clinicDuration",className:"text-sm font-semibold",children:"Consultation Duration/Session time (in minutes)"}),s.jsx(r.Input,{name:"clinicDuration",id:"clinicDuration",placeholder:"Enter consultation duration in minutes ",value:i.values.clinicDuration,onChange:i.handleChange,labelProps:{className:"hidden"},className:"border-none placeholder:text-gray-500 placeholder:opacity-100 bg-white ring-1 ring-[#A9ABB2] focus:ring-2 focus:ring-black"}),i.touched.clinicDuration&&i.errors.clinicDuration&&s.jsx("p",{className:"text-red-500",children:i.errors.clinicDuration})]})]})]}),(i.values.serviceType??[]).includes("home")&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-4 mt-4 mb-3",children:[s.jsx("hr",{className:"flex-1 border-t border-black"}),s.jsx("span",{className:"text-black font-medium",children:"HomeCare Details"}),s.jsx("hr",{className:"flex-1 border-t border-black"})]}),s.jsxs("div",{className:"",children:[s.jsxs("div",{className:"space-y-2 mb-3",children:[s.jsx("label",{htmlFor:"homePincode",className:"text-sm font-semibold",children:"Pincode where you want to serve"}),s.jsx(r.Input,{name:"homePincode",id:"homePincode",placeholder:"Enter Pincode",value:i.values.homePincode,onChange:k,labelProps:{className:"hidden"},className:"border-none placeholder:text-gray-500 placeholder:opacity-100 bg-white ring-1 ring-[#A9ABB2] focus:ring-2 focus:ring-black"}),i.touched.homePincode&&i.errors.homePincode&&s.jsx("p",{className:"text-red-500",children:i.errors.homePincode})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"homeCity",className:"text-sm font-semibold",children:"City"}),s.jsx(r.Input,{name:"homeCity",value:i.values.homeCity,onChange:i.handleChange,labelProps:{className:"hidden"},placeholder:"Enter City",disabled:i.values.homePincode.length==6,className:"border-none placeholder:text-gray-500 placeholder:opacity-100 bg-white ring-1 ring-[#A9ABB2] focus:ring-2 focus:ring-black"}),i.touched.homeCity&&i.errors.homeCity&&s.jsx("p",{className:"text-red-500",children:i.errors.homeCity})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"homeState",className:"text-sm font-semibold",children:"State"}),s.jsx(r.Input,{name:"homeState",value:i.values.homeState,onChange:i.handleChange,labelProps:{className:"hidden"},placeholder:"Enter State",disabled:i.values.homePincode.length==6,className:"border-none placeholder:text-gray-500 placeholder:opacity-100 bg-white ring-1 ring-[#A9ABB2] focus:ring-2 focus:ring-black"}),i.touched.homeState&&i.errors.homeState&&s.jsx("p",{className:"text-red-500",children:i.errors.homeState})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"homeCharges",className:"text-sm font-semibold",children:"Homecare Consultation Fee"}),s.jsx(r.Input,{id:"homeCharges",name:"homeCharges",placeholder:"â‚¹ Enter homecare consultation fee in INR",value:i.values.homeCharges,onChange:i.handleChange,labelProps:{className:"hidden"},className:"border-none placeholder:text-gray-500 placeholder:opacity-100 bg-white ring-1 ring-[#A9ABB2] focus:ring-2 focus:ring-black"}),i.touched.homeCharges&&i.errors.homeCharges&&s.jsx("p",{className:"text-red-500",children:i.errors.homeCharges})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"duration",className:"text-sm font-semibold",children:"Consultation Time(in minutes)"}),s.jsx(r.Input,{id:"homeDuration",name:"homeDuration",placeholder:"Enter consultation duration in minutes ",value:i.values.homeDuration,onChange:i.handleChange,labelProps:{className:"hidden"},className:"border-none placeholder:text-gray-500 placeholder:opacity-100 bg-white ring-1 ring-[#A9ABB2] focus:ring-2 focus:ring-black"}),i.touched.homeDuration&&i.errors.homeDuration&&s.jsx("p",{className:"text-red-500",children:i.errors.homeDuration})]})]})]})]}),s.jsxs("div",{className:"w-full flex flex-row justify-between items-center mt-4 gap-4 ",children:[s.jsxs("button",{type:"button",onClick:()=>j(-1),className:"text-black hover:text-green font-medium flex items-center gap-1 text-sm sm:text-base",children:[s.jsx($,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Go Back"]}),s.jsx(r.Button,{className:"w-fit hover:shadow-none  px-6 sm:px-12 bg-green rounded-full py-3 font-semibold ",type:"submit",children:"Submit & Pay"})]})]})})]})})};export{ee as default};
