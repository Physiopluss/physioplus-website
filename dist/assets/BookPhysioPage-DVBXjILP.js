import{j as e,z as I,e as z,f as Y,d as m,B as U,p as _,A as C}from"./index-B5YKgjKu.js";import{t as R,c as F,n as W}from"./en-US-DNUEYIb-.js";import{c as G}from"./constructNow-DtVD-0hX.js";import{s as P,f}from"./format-Z3uyJz-7.js";import{L as q}from"./LocationPickerModal-HzGOP78k.js";import{g as H}from"./homecare-CKcwPhMF.js";import{A as J}from"./arrow-left-CftlIMTS.js";import{S as V,U as X}from"./users-DJ7nqm6u.js";import{S as $}from"./star-BII_Mw3G.js";import{C as K}from"./circle-check-big-BSM2FWzT.js";import{X as Q}from"./x--gYKR96B.js";function Z(a,n,t){const o=R(a,t==null?void 0:t.in);return isNaN(n)?F(a,NaN):(n&&o.setDate(o.getDate()+n),o)}function ee(a,n,t){const[o,x]=W(t==null?void 0:t.in,a,n);return+P(o)==+P(x)}function te(a,n){return ee(F(a,a),G(a))}const re=a=>f(a,"EEE"),se=a=>f(a,"d");function ae({workingDays:a=[],selected:n,onSelect:t}){const o=new Date,x=Array.from({length:14},(c,i)=>Z(o,i));return e.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar py-1",children:x.map((c,i)=>{const g=re(c),u=a.includes(g)&&!te(c),h=n&&f(c,"yyyy-MM-dd")===f(n,"yyyy-MM-dd");return e.jsxs("button",{disabled:!u,onClick:()=>u&&t(c),className:`text-center px-3 py-2 border rounded-lg text-sm min-w-[56px] transition-colors
              ${u?h?"border-green text-green font-semibold bg-green/10":"border-gray-300 text-gray-600 hover:border-green hover:text-green":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx("div",{children:g}),e.jsx("div",{children:se(c)})]},i)})})}function ne(a){const n=new Date().getFullYear(),t=parseInt(a);return t?n-t:""}function le(a){return{0:"Female",1:"Male",2:"Other"}[a]??""}function be(){var j,N,v,y,w,D,S,k;I();const a=z(),{state:n}=Y(),t=n==null?void 0:n.physio,o=((j=JSON.parse(localStorage.getItem("homecareUser")))==null?void 0:j.userId)??null,[x,c]=m.useState(null),[i,g]=m.useState(null),[u,h]=m.useState(!1),[M,b]=m.useState(!1),[l,d]=m.useState({name:"",age:"",gender:"",problem:"",address:"",nearby:"",pincode:"",lat:"",lng:""});m.useEffect(()=>{(async()=>{if(o)try{const r=await H(o);if(!r){C.error("Patient not found");return}c(r),d(p=>({...p,name:(r==null?void 0:r.fullName)||"",age:ne(r==null?void 0:r.dob),gender:le(r==null?void 0:r.gender),address:(r==null?void 0:r.appointmentAddress)||"",pincode:(r==null?void 0:r.zipCode)||"",lat:(r==null?void 0:r.latitude)||"",lng:(r==null?void 0:r.longitude)||""}))}catch{C.error("Failed to fetch patient details")}})()},[o]);const A={Monday:"Mon",Tuesday:"Tue",Wednesday:"Wed",Thursday:"Thu",Friday:"Fri",Saturday:"Sat",Sunday:"Sun"},E=((v=(N=t==null?void 0:t.home)==null?void 0:N.workingDays)==null?void 0:v.map(s=>A[s]))||[],B=({address:s,nearby:r,pincode:p,lat:L,lng:O})=>{d(T=>({...T,address:s,nearby:r,pincode:p,lat:L,lng:O}))};return e.jsxs("div",{className:"relative md:max-w-4xl max-w-sm mx-auto px-4 py-4 min-h-screen bg-white",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("button",{onClick:()=>a(-1),children:e.jsx(J,{className:"h-5 w-5 text-green-700"})}),e.jsx("h2",{className:"ml-auto mr-auto text-sm font-medium text-green",children:"View Profile"})]}),e.jsxs("div",{className:"bg-[#f1fff4] p-4 rounded-xl shadow-sm",children:[e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("img",{src:t==null?void 0:t.profileImage,alt:t==null?void 0:t.fullName,className:"w-20 h-20 rounded-full object-cover border"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-md font-semibold text-green",children:t==null?void 0:t.fullName}),e.jsxs("p",{className:"flex gap-2 text-sm",children:[e.jsx(V,{className:"w-4 h-4 flex-shrink-0 mt-1"}),e.jsx("span",{className:"break-words flex flex-wrap",children:[(w=(y=t==null?void 0:t.bptDegree)==null?void 0:y.degreeId)==null?void 0:w.name,(S=(D=t==null?void 0:t.mptDegree)==null?void 0:D.degreeId)==null?void 0:S.name].filter(Boolean).join(", ")})]}),e.jsxs("div",{className:"flex gap-2 text-sm",children:[e.jsx(X,{className:"w-4 h-4"})," ",t==null?void 0:t.patientCount," Patient Treated"]}),e.jsxs("p",{className:"flex gap-2 text-sm",children:[e.jsx($,{className:"w-4 h-4"}),t==null?void 0:t.rating," Rating"]})]})]}),e.jsx("div",{className:"flex gap-2 mt-2 flex-wrap",children:(k=t==null?void 0:t.specialization)==null?void 0:k.map((s,r)=>e.jsx("span",{className:"bg-white text-green font-semibold px-3 py-1 rounded text-xs border border-green",children:s==null?void 0:s.name},r))}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center mt-4",children:[e.jsxs("div",{className:"bg-white rounded-lg border p-2",children:[e.jsx(K,{className:"inline-block mb-1 text-green"}),e.jsx("p",{className:"text-sm font-medium text-green",children:"Speak"}),e.jsx("p",{className:"text-xs",children:"Hindi, English"})]}),e.jsxs("div",{className:"bg-white rounded-lg border p-2",children:[e.jsx(U,{className:"inline-block mb-1 text-green"}),e.jsxs("p",{className:"text-sm font-medium text-green",children:[t==null?void 0:t.workExperience,"+ Years"]}),e.jsx("p",{className:"text-xs",children:"Experience"})]}),e.jsxs("div",{className:"bg-white rounded-lg border p-2",children:[e.jsx(_,{className:"inline-block mb-1 text-green"}),e.jsx("p",{className:"text-sm font-medium text-green",children:t==null?void 0:t.city}),e.jsx("p",{className:"text-xs",children:t==null?void 0:t.zipCode})]})]})]}),e.jsxs("div",{className:"mt-6 w-full",children:[e.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Select Date"}),e.jsx(ae,{workingDays:E,selected:i,onSelect:s=>g(s)})]}),e.jsx("div",{className:"my-8",children:u?e.jsxs("div",{className:"bg-white w-full rounded-xl px-4 py-6 border",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-md font-semibold",children:"Add Patient Details"}),e.jsx("button",{onClick:()=>h(!1),children:e.jsx(Q,{className:"w-5 h-5 text-gray-600"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Please provide details to continue."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",placeholder:"Patient Name",value:l.name,onChange:s=>d({...l,name:s.target.value})}),e.jsx("input",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",placeholder:"Enter Your Age",value:l.age,onChange:s=>d({...l,age:s.target.value})}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm text-gray-500",value:l.gender,onChange:s=>d({...l,gender:s.target.value}),children:[e.jsx("option",{value:"",children:"Gender (Select or Edit)"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]}),e.jsx("textarea",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",placeholder:"Describe your problem",value:l.problem,onChange:s=>d({...l,problem:s.target.value})}),e.jsx("div",{className:"flex justify-start",children:e.jsx("button",{onClick:()=>b(!0),className:"text-xs hover:text-blue-800 hover:bg-white border border-blue-800  text-white bg-blue-800 px-4 py-2 rounded-md font-semibold",children:"Use Current Location"})}),e.jsx("input",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",placeholder:"Address",value:l.address,onChange:s=>d({...l,address:s.target.value})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"w-1/2 border border-gray-300 rounded-md px-3 py-2 text-sm",placeholder:"Nearby (Optional)",value:l.nearby,onChange:s=>d({...l,nearby:s.target.value})}),e.jsx("input",{className:"w-1/2 border border-gray-300 rounded-md px-3 py-2 text-sm",placeholder:"Pincode",value:l.pincode,onChange:s=>d({...l,pincode:s.target.value})})]})]}),e.jsx("button",{className:"mt-5 w-full bg-green hover:bg-[#15692c] text-white py-3 rounded-xl text-sm font-medium",onClick:()=>{a("/homecare/book/summary",{state:{patient:x,physio:t,formData:l,selectedDate:i}})},children:"Continue to Pay"})]}):e.jsx("button",{className:"w-full bg-green hover:bg-[#15692c] text-white py-3 rounded-xl text-sm font-medium",onClick:()=>h(!0),children:"Book Physio Now"})}),e.jsx(q,{isOpen:M,onClose:()=>b(!1),onLocationSelect:B})]})}export{be as default};
