import{d as r,j as e,K as W,M as C,N as j,P as L,_ as p,Q as E}from"./index-B5YKgjKu.js";import{f as M}from"./format-Z3uyJz-7.js";import"./en-US-DNUEYIb-.js";function F({onClose:c,onConfirm:x,availableBalance:m}){const[n,f]=r.useState(""),[l,t]=r.useState(!1),d=async()=>{if(!(!n||isNaN(n)||+n<=0)){t(!0);try{await x(+n)}finally{t(!1)}}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:e.jsxs("div",{className:"bg-white rounded-lg p-4 w-80",children:[e.jsx("div",{className:"text-lg font-semibold mb-3",children:"Withdraw Amount"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2 mb-3",placeholder:"Enter amount",value:n,onChange:u=>f(u.target.value),min:1,max:m}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{className:"px-4 py-2 rounded border border-gray-300",onClick:c,disabled:l,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded bg-green text-white font-semibold",onClick:d,disabled:l||+n>m,children:l?"Processing...":"Confirm"})]})]})})}function B({onClose:c,onConfirm:x,availableBalance:m}){const[n,f]=r.useState(""),[l,t]=r.useState(!1),d=async()=>{if(!(!n||isNaN(n)||+n<=0)){t(!0);try{await x(+n)}finally{t(!1)}}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:e.jsxs("div",{className:"bg-white rounded-lg p-4 w-80",children:[e.jsx("div",{className:"text-lg font-semibold mb-3",children:"Pay to Admin"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2 mb-3",placeholder:"Enter amount",value:n,onChange:u=>f(u.target.value),min:1,max:Math.abs(m)}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{className:"px-4 py-2 rounded border border-gray-300",onClick:c,disabled:l,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded bg-green text-white font-semibold",onClick:d,disabled:l||+n>Math.abs(m),children:l?"Processing...":"Confirm"})]})]})})}function D(){var N,w;const[c,x]=r.useState("online"),[m,n]=r.useState(null),[f,l]=r.useState(null),[t,d]=r.useState(null),[u,y]=r.useState(!1),[k,b]=r.useState(!1),[A,g]=r.useState(!1),h=JSON.parse(localStorage.getItem("homecareUser")),i=h==null?void 0:h.userId,S=h==null?void 0:h.userToken;r.useEffect(()=>{i&&(async()=>{try{y(!0);const a=await W({physioId:i});n(a)}catch{n(null)}finally{y(!1)}})()},[]),r.useEffect(()=>{i&&(async()=>{try{y(!0);const a=await C({physioId:i});l(a)}catch{l(null)}finally{y(!1)}})()},[]),r.useEffect(()=>{i&&(async()=>{try{const a=await j({physioId:i});d(a)}catch{d(null)}})()},[]);const P=async s=>{try{await L({physioId:i,amount:s}),p.success("Withdrawal request submitted");const a=await W({physioId:i});n(a);const o=await j({physioId:i});d(o),b(!1)}catch(a){p.error("Withdrawal failed"),console.error(a)}},T=async s=>{try{await E({physioId:i,amount:s,userToken:S}),p.success("Payment submitted");const a=await C({physioId:i});l(a);const o=await j({physioId:i});d(o),g(!1)}catch(a){p.error("Payment failed"),console.error(a)}};return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen flex flex-col bg-white pb-4",children:[e.jsx("div",{className:"flex items-center justify-center h-14 text-base font-semibold border-b border-gray-100 bg-white",children:"Wallet"}),e.jsx("div",{className:"mx-3 mt-4 space-y-2",children:u?e.jsx("div",{className:"text-center text-gray-400",children:"Loading..."}):t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between bg-[#f3f8f6] rounded-lg px-4 py-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Revenue"}),e.jsxs("span",{className:"font-semibold text-base  text-green",children:["₹",(t==null?void 0:t.totalRevenue.toFixed(2))||"0"]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg px-4 py-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Consultations"}),e.jsx("span",{className:"text-green font-semibold",children:(t==null?void 0:t.totalAppointment)||"0"})]}),e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg px-4 py-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Treatment"}),e.jsx("span",{className:"text-green font-semibold",children:(t==null?void 0:t.totalTreatment)||"0"})]})]}):e.jsx("div",{className:"text-center text-red-400",children:"No stats found."})}),e.jsx("div",{className:"flex w-full mt-5 border-b border-gray-100",children:["online","cash"].map(s=>e.jsx("button",{className:`flex-1 text-center py-3 font-semibold border-b-2 transition ${c===s?"text-green border-green":"text-gray-400 border-transparent"}`,onClick:()=>x(s),children:s.charAt(0).toUpperCase()+s.slice(1)},s))}),c==="online"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-4 pt-4",children:[e.jsxs("div",{className:"bg-[#c3f4cb] rounded-2xl p-4 text-green shadow-md relative",children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx("div",{className:"text-sm mb-1 font-medium",children:"Available Balance"}),e.jsxs("div",{className:`text-2xl font-bold mb-3 ${(t==null?void 0:t.physioWalletAmt)<0?"text-red-600":"text-green"}`,children:["₹",((N=t==null?void 0:t.physioWalletAmt)==null?void 0:N.toFixed(2))||"0.00"]})]}),e.jsx("button",{className:"bg-white text-green font-semibold rounded-full px-6 py-2 w-full disabled:opacity-50",onClick:()=>b(!0),disabled:(t==null?void 0:t.physioWalletAmt)<=0,children:"Withdraw"})]}),e.jsxs("button",{className:"mt-4 flex items-center gap-2 px-4 py-2 border rounded-full text-sm font-medium text-gray-700",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582M20 20v-5h-.582M20 4L4 20"})}),"Withdrawal History"]})]}),e.jsx("div",{className:"mt-6 px-4 space-y-4",children:(m||[]).map((s,a)=>{var o,v;return e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 border border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-sm text-black",children:[((o=s==null?void 0:s.physioId)==null?void 0:o.fullName)||"Physioplus Physio"," |"," ",M(new Date(s==null?void 0:s.createdAt),"dd MMM yyyy, hh:mm a")]}),e.jsxs("div",{className:"text-xs font-medium mt-1 text-green",children:[s==null?void 0:s.paymentMode," | ",s==null?void 0:s.paymentStatus]})]}),e.jsxs("div",{className:"text-sm font-bold text-green",children:["₹",(v=s.amount)==null?void 0:v.toFixed(2)]})]})},a)})})]}),c==="cash"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-4 pt-4",children:[e.jsxs("div",{className:"bg-[#c3f4cb] text-green rounded-2xl p-4 shadow-md relative",children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsxs("div",{className:"text-sm mb-1 font-medium",children:[" ","Available Balance"]}),e.jsxs("div",{className:`text-2xl font-bold mb-3 ${(t==null?void 0:t.physioWalletAmt)<0?"text-red-600":"text-green"}`,children:["₹",((w=t==null?void 0:t.physioWalletAmt)==null?void 0:w.toFixed(2))||"0.00"]})]}),e.jsx("button",{className:"bg-white text-green font-semibold rounded-full px-6 py-2 w-full disabled:opacity-50",onClick:()=>g(!0),disabled:(t==null?void 0:t.physioWalletAmt)>=0,children:"Pay to Admin"})]}),e.jsxs("button",{className:"mt-4 flex items-center gap-2 px-4 py-2 border rounded-full text-sm font-medium text-gray-700",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582M20 20v-5h-.582M20 4L4 20"})}),"Payment Log"]})]}),e.jsx("div",{className:"mt-6 px-4 space-y-4",children:(f||[]).map((s,a)=>{var o;return e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 border border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-sm text-black",children:[((o=s==null?void 0:s.physioId)==null?void 0:o.fullName)||"Physioplus Physio"," |"," ",M(new Date(s==null?void 0:s.createdAt),"dd MMM yyyy, hh:mm a")]}),e.jsxs("div",{className:"text-xs font-medium mt-1 text-yellow-800",children:[s==null?void 0:s.paymentMode," | ",s==null?void 0:s.paymentStatus]})]}),e.jsxs("div",{className:"text-sm font-bold text-yellow-700",children:["₹",s==null?void 0:s.amount]})]})},a)})})]}),A&&e.jsx(B,{onClose:()=>g(!1),onConfirm:T,availableBalance:(t==null?void 0:t.physioWalletAmt)||0}),k&&e.jsx(F,{onClose:()=>b(!1),onConfirm:P,availableBalance:(t==null?void 0:t.physioWalletAmt)||0})]})}export{D as default};
