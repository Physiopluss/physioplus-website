import{d as m,e as C,u as O,a9 as E,_ as o,j as e,r as w,aS as y,a6 as k,aQ as T}from"./index-B-e9AaA1.js";import{O as z}from"./index.esm-2MdjxqzC.js";import{u as I,c as A,a as j}from"./formik.esm-BXPmvFRR.js";import{j as B,p as R}from"./physioConnect-wQ3SlVLV.js";import{S as q}from"./SuccessModal-BwKzELf1.js";const Y=()=>{const[p,v]=m.useState(!1),n=C(),u=O(),[h,x]=m.useState("");m.useEffect(()=>{E.send({hitType:"pageview",page:window.location.pathname,title:"Physio Connect Signup"})},[]);const s=I({initialValues:{fullName:"",mobile:""},validationSchema:A().shape({fullName:j().min(3,"Too Short!").max(50,"Too Long!").required("name is required"),mobile:j().length(10,"Number should be 10 digits").matches(/[6789]\d{9}$/g,"Phone number is not valid").required("Phone number is required")}),onSubmit:l=>{const{mobile:i}=l;B(i).then(a=>{a.status>=200&&a.status<300?(o.success(a.data.message,{id:"otpSendViaSignup",className:"capitalize"}),v(!0)):a.status>=400&&a.status<500?o.error(a.data.message,{id:"SignupError1",className:"capitalize"}):o.error("Something went wrong",{id:"SignupError2",className:"capitalize"})})}}),S=async()=>{var l,i,a,g,f,b,N;try{const t=await R(s.values.mobile,h,s.values.fullName),r=(l=t==null?void 0:t.data)==null?void 0:l.isNew,c=(a=(i=t==null?void 0:t.data)==null?void 0:i.data)==null?void 0:a.isPhysioConnectPaid,d=(f=(g=t==null?void 0:t.data)==null?void 0:g.physio)==null?void 0:f._id;if(!d)throw new Error("Physio ID missing from response");const P=!r&&c;o.success(r?"Welcome aboard! Sign-up successful.":c?"You're already registered. Download Our App & login to continue.":"You're registered. Please complete your profile.",{id:r?"signupSuccess":c?"loginPrompt":"profilePrompt",className:"capitalize z-10"}),P&&setTimeout(()=>{window.location.href="https://play.google.com/store/apps/details?id=com.physio.physio&hl=en"},2e3),sessionStorage.setItem("physioConnectId",d),u(T(d)),x(""),setTimeout(()=>{(r||c===!1)&&n("/physio-connect/personal-details")},1500)}catch(t){console.error("OTP Submit Error:",t),((b=t.response)==null?void 0:b.status)>=400&&((N=t.response)==null?void 0:N.status)<500?o.error("Invalid OTP Code",{id:"OtpErrorLogin1",className:"capitalize z-10"}):o.error("Something went wrong",{id:"OtpErrorLogin2",className:"capitalize z-10"})}};return m.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row my-auto max-h-screen sm:overflow-hidden",children:[e.jsxs("div",{className:"relative hidden md:block md:w-3/5 bg-green",children:[e.jsx("img",{src:"https://123456789video.s3.ap-south-1.amazonaws.com/Physioplus+Inc+Patient/Swiper+Gallery/full-shot-woman-physical-rehabilitation+(1)+1+(1)+(1).png ",alt:"",className:"object-contain"}),e.jsx("img",{src:"/connect/logo.png",className:"absolute w-24 top-16 left-8 cursor-pointer",onClick:()=>n("/")}),e.jsxs("div",{className:"absolute px-4 w-full bottom-8 text-white flex flex-col items-center gap-4",children:[e.jsx("p",{className:"text-3xl font-semibold text-center",children:"Unlock Your Strength: Join the Path to Recovery Today!"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("p",{className:"flex gap-2 items-center",children:[e.jsx("img",{src:"/connect/tick.png",alt:"",className:"w-4 object-cover bg-white p-0 rounded-full"}),"Boost Earnings"]}),e.jsxs("p",{className:"flex gap-2 items-center",children:[e.jsx("img",{src:"/connect/tick.png",alt:"",className:"w-4 object-cover bg-white p-0 rounded-full"}),"Boost Earnings"]}),e.jsxs("p",{className:"flex gap-2 items-center",children:[e.jsx("img",{src:"/connect/tick.png",alt:"",className:"w-4 object-cover bg-white p-0 rounded-full"}),"Boost Earnings"]})]})]})]}),e.jsxs("div",{className:"px-8 py-8 min-h-screen sm:py-0 md:w-2/5 flex gap-2 flex-col justify-center items-center text-black",children:[e.jsxs("form",{onSubmit:s.handleSubmit,className:"flex gap-2 flex-col",children:[e.jsxs("div",{className:"my-2 flex flex-col gap-2",children:[e.jsx("img",{src:"/connect/logo.png",alt:"",className:"w-24 cursor-pointer",onClick:()=>n("/")}),e.jsx("p",{className:"text-lg font-medium",children:"Welcome to Physioplus Community"}),e.jsx("p",{className:"text-3xl ",children:"Get started with your name & phone number"})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[e.jsx("label",{htmlFor:"fullName",className:"text-sm",children:"Name"}),e.jsx(w.Input,{id:"fullName",size:"md",name:"fullName",onChange:s.handleChange,value:s.values.fullName,labelProps:{className:"hidden"},placeholder:"Enter Your Name",className:"border-none placeholder:text-gray-300 placeholder:opacity-100 bg-white ring-1 ring-[#A9ABB2] focus:ring-2 focus:ring-black"})]}),s.touched.fullName&&s.errors.fullName?e.jsx("div",{className:"text-red-500 mt-2",children:s.errors.fullName}):null,e.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[e.jsx("label",{htmlFor:"mobile",className:"text-sm",children:"Mobile Number"}),e.jsx(w.Input,{id:"mobile",size:"md",name:"mobile",maxLength:10,onChange:s.handleChange,value:s.values.mobile,labelProps:{className:"hidden"},placeholder:"Enter Mobile Number",className:"border-none placeholder:text-gray-300 placeholder:opacity-100 bg-white ring-1 ring-[#A9ABB2] focus:ring-2 focus:ring-black"})]}),s.touched.mobile&&s.errors.mobile?e.jsx("div",{className:"text-red-500 mt-2",children:s.errors.mobile}):null,e.jsx("hr",{className:"w-full border border-gray-200 my-4"}),e.jsx(y,{type:"submit",className:"mt-2 font-normal text-sm sm:text-base rounded-full w-full bg-green text-white hover:shadow-none px-8 py-2 capitalize",children:p?"Resend OTP":"Send OTP"})]}),p&&e.jsxs("div",{className:"w-full my-4 flex flex-col gap-2 justify-center",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-center",children:"Otp has been sent to your mobile number"}),s.values.mobile.length===10?e.jsxs("p",{className:"text-center",children:["+91 ",s.values.mobile]}):null]}),e.jsxs("div",{className:"flex flex-col gap-4 justify-center items-center",children:[e.jsx("p",{children:"Verify Otp"}),e.jsx(z,{value:h,onChange:x,numInputs:4,inputType:"number",renderSeparator:e.jsx("span",{children:"     "}),renderInput:l=>e.jsx("input",{required:!0,...l,style:{width:"40px",height:"40px"},className:"!border-b-2 text-center rounded-none border-black outline-none text-black  "})})]}),e.jsx(y,{onClick:()=>S(),className:"mt-2 font-normal text-sm sm:text-base rounded-full w-full bg-green text-white hover:shadow-none px-8 py-2 capitalize",children:"Submit OTP"})]})]})]}),e.jsx(q,{title:"This Number is Already Registered With Us",btnOne:"Go to main menu",btnOneFunction:()=>{u(k()),window.history.pushState(null,null,window.location.href),window.history.replaceState(null,null,"/physio-connect"),n("/physio-connect",{replace:!0}),window.addEventListener("popstate",()=>{n("/physio-connect",{replace:!0})})}})]})};export{Y as default};
