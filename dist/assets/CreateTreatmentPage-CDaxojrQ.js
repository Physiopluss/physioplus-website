import{z as F,e as I,d as r,j as e,S as E,W as z,U as L,_ as y,a0 as R}from"./index-B5YKgjKu.js";import{b as $}from"./index-DQkzyL4I.js";function W(){var g,p,j;const{id:i}=F(),v=I(),x=r.useRef(),[c,N]=r.useState(""),[d,w]=r.useState(""),[C,u]=r.useState(!1),[h,b]=r.useState(!1),[s,D]=r.useState(null),[m,T]=r.useState(""),[l,Y]=r.useState([]),f=(t=30)=>{const a=[];for(let o=0;o<24;o++)for(let n=0;n<60;n+=t){const S=o%12===0?12:o%12,M=n<10?`0${n}`:n,P=o<12?"AM":"PM";a.push(`${S}:${M} ${P}`)}return a};r.useEffect(()=>{i&&(async()=>{try{const a=await L(i);D(a)}catch(a){console.error("Error fetching consultation:",a)}})()},[i]);const k=async()=>{if(l.length===0||!m||!c.trim()||!d.trim()){y.error("Please fill all fields");return}try{b(!0),await R({appointmentId:i,date:l.map(t=>t.format("YYYY-MM-DD")),startTime:c,endTime:d,treatmentAmount:m}),u(!0)}catch{y.error("Failed to create treatment plan")}finally{b(!1)}};return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-white pb-8 flex flex-col",children:[e.jsx("div",{className:"h-14 flex items-center justify-center text-base font-semibold border-b border-gray-100 bg-white",children:"Patient Details"}),e.jsxs("div",{className:"bg-white rounded-xl shadow border border-gray-100 flex items-center gap-3 px-4 py-4 mt-4 mx-3",children:[e.jsx("img",{src:((g=s==null?void 0:s.patientId)==null?void 0:g.profilePhoto)||"/homecare/user.png",alt:(p=s==null?void 0:s.patientId)==null?void 0:p.fullName,className:"w-12 h-12 rounded-full object-cover border"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-base",children:(j=s==null?void 0:s.patientId)==null?void 0:j.fullName}),e.jsx("div",{className:"text-xs text-gray-600",children:"Consultation"}),e.jsx("div",{className:"flex gap-4 mt-1 text-xs text-gray-600",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"w-4 h-4"}),new Date(s==null?void 0:s.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow border border-green/10 px-4 py-5 mx-3 mt-5",children:[e.jsx("div",{className:"text-[15px] font-semibold text-green mb-3",children:"Create Treatment"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"text-xs text-gray-600 font-medium mb-1 block",children:"Select Treatment Days"}),e.jsxs("div",{className:"relative inline-flex items-center",children:[e.jsx("button",{type:"button",onClick:()=>x.current.openCalendar(),className:"p-2 border border-gray-300 rounded-md bg-white text-gray-700 hover:bg-gray-100",children:e.jsx($,{size:20})}),e.jsx(z,{ref:x,multiple:!0,value:l,onChange:Y,format:"DD MMM YYYY",onlyCalendar:!0,portal:!0,inputClass:"hidden",mapDays:({date:t,selectedDates:a=[]})=>({style:a.some(n=>n.format("YYYY-MM-DD")===t.format("YYYY-MM-DD"))?{backgroundColor:"#22c55e",color:"white",borderRadius:"8px"}:{}})})]}),(l==null?void 0:l.length)>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:l.map((t,a)=>e.jsx("span",{className:"bg-green/10 text-green text-xs px-2 py-1 rounded-md",children:t.format("DD MMM YYYY")},a))})]}),e.jsxs("div",{className:"flex gap-3 mb-3",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"text-xs text-gray-600 font-medium mb-1 block",children:"From Time"}),e.jsxs("select",{className:"w-full border border-gray-200 rounded-md px-3 py-2 text-sm bg-white focus:outline-none focus:border-green",value:c,onChange:t=>N(t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),f().map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"text-xs text-gray-600 font-medium mb-1 block",children:"To Time"}),e.jsxs("select",{className:"w-full border border-gray-200 rounded-md px-3 py-2 text-sm bg-white focus:outline-none focus:border-green",value:d,onChange:t=>w(t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),f().map(t=>e.jsx("option",{value:t,children:t},t))]})]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"text-xs text-gray-600 font-medium mb-1 block",children:"Treatment Fees (Per day)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xl",children:"â‚¹"}),e.jsx("input",{type:"number",min:0,className:"w-full border border-gray-200 rounded-md px-8 py-2 text-sm bg-white focus:outline-none focus:border-green",value:m,onChange:t=>T(t.target.value),placeholder:"Enter fees"})]})]})]}),e.jsx("button",{className:"w-full max-w-md mx-auto bg-green text-white rounded-t-lg py-3 font-semibold text-base shadow-lg mt-4",onClick:k,disabled:h,children:h?"Creating...":"Create Treatment"}),C&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 z-50",onClick:()=>u(!1)}),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg px-6 pt-7 pb-5 flex flex-col items-center w-full max-w-xs text-center relative",children:[e.jsx("span",{className:"inline-block bg-green/10 rounded-full p-2 mb-3",children:e.jsxs("svg",{className:"h-8 w-8 text-green",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:"12",cy:"12",r:"12",fill:"currentColor",opacity:"0.15"}),e.jsx("path",{d:"M7 13l3 3 7-7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("div",{className:"font-semibold text-base mb-1",children:"Treatment is Scheduled"}),e.jsx("div",{className:"text-xs text-gray-500 mb-4",children:"Thank you for scheduling the treatment."}),e.jsx("button",{className:"w-full bg-green text-white rounded-md py-2 font-semibold text-sm shadow mt-1",onClick:()=>v("/homecare/physio-treatments"),children:"Go to Treatments"})]})})]})]})}export{W as default};
