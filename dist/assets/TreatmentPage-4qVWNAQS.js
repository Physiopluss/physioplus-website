import{e as j,d as r,j as e,H as v}from"./index-CWqE7d4E.js";function T(){var p;const d=j(),[a,c]=r.useState("OnGoing"),[i,u]=r.useState([]),[x,f]=r.useState([]),[y,m]=r.useState(!0),n=((p=JSON.parse(localStorage.getItem("homecareUser")))==null?void 0:p.userId)??null;r.useEffect(()=>{if(!n)return;(async()=>{try{m(!0);const o=await v(n),g=[],h=[];o.forEach(s=>{var b;const l={id:s._id,patientName:(s==null?void 0:s.patientName)||"Patient",type:"Treatment",date:new Date(s.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),status:(b=s==null?void 0:s.isTreatmentScheduled)==null?void 0:b.isTreatmentCompleted};l.status?h.push(l):g.push(l)}),u(g),f(h)}catch(o){console.error("Error fetching treatments:",o)}finally{m(!1)}})()},[n]);const N=t=>{d("/homecare/get-invoice",{state:{order:t,type:"treatment"}})};return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen flex flex-col bg-white pb-4",children:[e.jsx("div",{className:"flex items-center justify-center h-14 text-base font-semibold border-b border-gray-100 bg-white",children:"Treatment"}),e.jsxs("div",{className:"flex w-full bg-white",children:[e.jsx("button",{className:`flex-1 text-center py-3 font-semibold border-b-2 ${a==="OnGoing"?"text-green border-green":"text-gray-400 border-transparent"}`,onClick:()=>c("OnGoing"),children:"OnGoing"}),e.jsx("button",{className:`flex-1 text-center py-3 font-semibold border-b-2 ${a==="Completed"?"text-green border-green":"text-gray-400 border-transparent"}`,onClick:()=>c("Completed"),children:"Completed"})]}),e.jsx("div",{className:"px-3 py-4 space-y-3",children:y?e.jsx("p",{className:"text-center text-gray-400 mt-10",children:"Loading..."}):a==="OnGoing"?i.length?i.map(t=>e.jsxs("div",{className:"bg-white rounded-2xl shadow border border-gray-100 flex flex-col px-4 py-5",children:[e.jsxs("div",{className:"border-b flex flex-row justify-between pb-2",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Home Care"}),e.jsx("span",{className:"px-2.5 py-[2px] mb-1 inline-block rounded-full text-[11px] font-medium text-yellow-700 bg-yellow-50 border border-yellow-400 whitespace-nowrap",children:"OnGoing"})]}),e.jsxs("div",{className:"flex items-center pt-4",children:[e.jsx("img",{src:"https://randomuser.me/api/portraits/men/1.jpg",alt:t.patientName,className:"w-12 h-12 rounded-full object-cover border border-gray-200"}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("div",{className:"font-medium text-base",children:t.patientName}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:t.type}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:t.date})]})]}),e.jsx("button",{className:"mt-3 bg-green text-white w-full py-2 rounded-md text-sm font-semibold shadow hover:bg-green-600 transition",onClick:()=>d(`/homecare/physio-treatment/${t.id}`),children:"Start"})]},t.id)):e.jsx("p",{className:"text-center text-gray-400 mt-4",children:"No ongoing treatments."}):x.length?x.map(t=>e.jsxs("div",{className:"bg-white rounded-2xl shadow border border-gray-100 flex flex-col px-4 py-5",children:[e.jsxs("div",{className:"border-b flex flex-row justify-between pb-2",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Home Care"}),e.jsx("span",{className:"px-2.5 py-[2px] mb-1 inline-block rounded-full text-[11px] font-medium text-green bg-green/10 border border-green whitespace-nowrap",children:"Completed"})]}),e.jsxs("div",{className:"flex items-center pt-4",children:[e.jsx("img",{src:"https://randomuser.me/api/portraits/men/1.jpg",alt:t.patientName,className:"w-12 h-12 rounded-full object-cover border border-gray-200"}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("div",{className:"font-medium text-base",children:t.patientName}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:t.type}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:t.date})]})]}),e.jsx("button",{className:"mt-3 bg-green text-white w-full py-2 rounded-md text-sm font-semibold shadow hover:bg-green-600 transition",disabled:!(t!=null&&t.status),onClick:()=>N(t),children:"Invoice"})]},t.id)):e.jsx("p",{className:"text-center text-gray-400 mt-4",children:"No completed treatments."})})]})}export{T as default};
